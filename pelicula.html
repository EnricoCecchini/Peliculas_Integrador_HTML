<!DOCTYPE html>
<html lang="eng">
<link rel="stylesheet" href="./styles.css">
<script>
    function passBusqueda () {
        let busquedaParam = document.getElementById('busquedaParam').value
        console.log(busquedaParam)
        localStorage.setItem('busquedaParam', busquedaParam)
        return false
    }
</script>

    <head>
        <title>Chak's Movie Catalogue</title>
    </head>
    <a href="./Index.html">
        <div class="head">
            <h1>Chak's Movie Catalogue</h1>
        </div>
    </a>
    <div class="divSearch">
        <form action="busqueda.html">
            <label for="Search" aria-placeholder="param"></label>
            <input type="text" id="param" name="param">
            <input type="submit" value="Search" onclick="passBusqueda()">
        </form>
    </div>
    <body class="body">
        <div>
            <h2 class="pageTitle">Editar Pelicula</h2>
            <hr size="1" color="black">
            <div class="pelicula" id="pelicula"></div>
            <script type="text/javascript">

                let pid = localStorage.getItem('pid')
                //localStorage.removeItem("pid")
                console.log(pid)

                const API = `http://127.0.0.1:5000/get_pelicula?pid=${pid}`
                fetch(API)
                .then((res) => {return res.json()})
                .then((p) => {console.log(p.pelicula); editPelicula(p.pelicula)})
                .catch((e) => console.log(e))

                function editPelicula(pelicula) {  
                    let pt = pelicula.titulo
                    console.log(pt)
                    let datos = document.getElementById('pelicula')

                    let form = document.createElement('form')
                    form.setAttribute('method', 'get')
                    form.setAttribute('action', 'http://127.0.0.1:5000/modify_pelicula')

                    let edit = document.createElement('input')
                    edit.setAttribute("type", "submit");
                    edit.setAttribute("value", "Submit");

                    let titulo = document.createElement('input')
                    titulo.setAttribute('type', 'text')
                    titulo.setAttribute('titulo', 'Titulo')
                    titulo.setAttribute('placeholder', {pt})

                    form.appendChild(titulo)
                    form.innerHTML += '<br><br>'
                    form.appendChild(edit)

                    document.getElementsByTagName("body")[0].appendChild(form)
                }
            </script>
    </body>
</html>